# Scaffold a New Reflect Project

Multiplayer in about sixty seconds (depending on how peppy npm is feeling today).

## Install

```bash copy
npx @rocicorp/reflect@latest create my-app
```

Creates a simple multiplayer starter app with Reflect, Vite, and React.

## Develop

```bash copy
cd my-app
npm run watch
```

Starts the local Reflect dev server and the Vite UI server. Open [http://localhost:5173/](http://localhost:5173/) in two tabs to see it in action.

Reflect's dev server is fully local, for fast iteration, and has watch-mode built in.

## Publish

```bash copy
npx reflect publish
```

Deploys the Reflect server to [reflect.net](https://reflect.net/).

This also updates the local `.env` file, so you can run against the production Reflect server with just:

```bash copy
npx vite
```

Watch the logs from production with:

```bash copy
npx reflect tail
```

## Quick Code Tour

`src/reflect/index.ts` is the entry point for the Reflect server. Reflect works by running **your code** on the server.

`src/reflect/client-state.ts` defines the synced data model. This example uses the Reflect API directly, but we advise most applications to use [Rails](https://github.com/rocicorp/rails), which generates handy CRUD functions.

`src/reflect/mutators.ts` defines the _mutators_. Mutators are how data is changed in Reflect. A mutator runs immediately (optimistically) on the client, and then later on the server as part of sync. Mutators are atomic – they have access to the entire synced data model and can make arbitrary changes to it, which are guaranteed to run completely or not at all. Mutators do not need to be pure – they can do something different on client than server. For example, you can enforce permissions and validation on the server, just like a classic web application would. If the server computes a different results than a client, the client will snap into agreement with the server.

`src/subscriptions.ts` defines the _subscriptions_. As in other modern data systems, you render Reflect apps reactively. These subscriptions fire when synced data is changed either locally or by other collaborators.

For more information about Reflect's design and its benefits please see [this recent talk](https://www.youtube.com/live/7Bb0KRLL8FI?si=O_tO27zgpoxPIrHW&t=1830) or the [associated slides](https://pitch.com/public/a49fccb0-da65-4d64-966e-e519674d951f).
